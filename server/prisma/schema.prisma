// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model article {
  article_id   String    @id @default(cuid())
  titre        String
  contenu      String
  niveau       String[]
  created_at   DateTime  @default(now())
  edited_at    DateTime?
  date_debut   DateTime
  date_fin     DateTime
  brouillon    Boolean   @default(false)
  creator      user      @relation(fields: [creator_id], references: [user_id])
  creator_id   String
  categorie    categorie @relation(fields: [categorie_id], references: [category_id])
  categorie_id Int
}

model version_article {
  version_article_id String    @id @default(cuid())
  article_id         String    @default(cuid())
  titre              String
  contenu            String
  niveau             String[]  @db.VarChar(2)
  created_at         DateTime  @default(now())
  edited_at          DateTime  @default(now())
  date_debut         DateTime
  date_fin           DateTime
  brouillon          Boolean   @default(false)
  creator            user      @relation(fields: [creator_id], references: [user_id])
  creator_id         String
  categorie          categorie @relation(fields: [categorie_id], references: [category_id])
  categorie_id       Int
}

model categorie {
  category_id     Int               @id @default(autoincrement())
  nom             String
  article         article[]
  version_article version_article[]
}

model user {
  user_id         String            @id @default(cuid())
  nom             String
  prenom          String
  username        String            @unique
  password        String
  role            Role
  article         article[]
  version_article version_article[]
}

enum Role {
  responsable_affichage
  super_user
}
